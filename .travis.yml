dist: trusty
sudo: false
language: node_js
node_js:
- '10'
env:
  global:
  - NODE_OPTIONS=--max_old_space_size=7000
cache:
- npm
addons:
  chrome: stable
install:
- npm ci
- npm install codecov -g
script:
- node -p "v8.getHeapStatistics().total_available_size / (1024 * 1024)"
- npm run lint
- npm run test-thanos -- --watch=false --progress=false --browsers=ChromeHeadlessCI
- npm run build-deps
- npm run test -- --watch=false --progress=false --browsers=ChromeHeadlessCI --code-coverage
- npm run buildS3
after_success:
- codecov
deploy:
  skip_cleanup: true
  provider: s3
  access_key_id: AKIARJIXB7N7YBBNYQXY
  secret_access_key:
    secure: daeSOhhDXENmv5mlFkg5kRiIzT69E/+VHgHKLH7Cfnckk3jFFhtguAEjO8UDWC16ZRxAuo34MDhLq+KDvvirySrJMZ5BVOHndTba++l3/uTbgL2Yo+LljwMxlo0gX9rzDz1BgOd1tM99ioMDDF62dc9RtJX2qhgDbhHeYGwlALSCeWA7IBZmmjPnsS5tN3V6xvO2eX7KL2JAdV/wJS9QtSwwjU+1kvUWBI6HAs4n/Djnhr1OId+x4c2gtaKyk1jWegu3w3lOb7w7ixmBQDk/0zRmyqFqxLPtqBJA2xtWF7YqzsfE8FPehK8VcI4Yk6o/zhZnbv/53KYOwrjjr0xPnjKTHypmS9SGaLEPfWaJUNVw/jaFYBzfIuMsrPRCcw1AjuJ6bt8H40FQF0f8lodFojyHNiroYHajEErTM+6L6auzegQk3gMcYP19xyhteWrs8oY4nice/OTbPz1XicTry4hifnEloXZz4UuQgCthmbQ9o6YJ1F4Berjkv2JTLMgwD6L9z9o6KBqtTkjwvBQPRxUBdCpneuLs+Qy2vkUdNBbTVT+axQ+fga2tXdHLsIdWfb0qHkcGyNVw7vKrKwQc5VaBn7alC9uPDLNkBHzXVhAPBGz9Ghn/v5WZha6Pdm257U6GUFIjsutIlhVZpgplnxrgWnfV6zfnf9QD6RVr2D0=
  bucket: superheroiccoding.de
  acl: public_read
  local_dir: distS3
  upload-dir: angularExamples
  detect_encoding: true
  default_text_charset: utf-8
  cache_control: max-age=31536000
  region: eu-central-1
  on:
    repo: SuperheroicCoding/AngularExamples
    branch: master
    tags: true

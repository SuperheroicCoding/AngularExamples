dist: trusty
sudo: false
language: node_js
node_js:
- '10'
env:
  global:
  - NODE_OPTIONS=--max_old_space_size=7000
cache:
- npm
addons:
  chrome: stable
install:
- npm ci
- npm install codecov -g
script:
- node -p "v8.getHeapStatistics().total_available_size / (1024 * 1024)"
- npm run lint
- npm run test-thanos -- --watch=false --progress=false --browsers=ChromeHeadlessCI
- npm run build-deps
- npm run test -- --watch=false --progress=false --browsers=ChromeHeadlessCI --code-coverage
after_success:
- codecov
before_deploy:
- npm run buildS3
deploy:
  skip_cleanup: true
  provider: s3
  access_key_id: AKIARJIXB7N7V2AUUGU2
  secret_access_key:
    secure: CV5OT8q6gMoDolBgEq0YAcx3qJ7SqGhbahyRAcbHp4G7DKHV+6OYCIxngrkmmFpB5z4Yw/2+0iAhXDg3WqSyCPU6r+Fcfq7H4vF38hySBc0I2SmraQi8Dh94mRyjlwDMD7jCXgNJ2dH3sY5Z58nlUvxaAc/SAtT8oGCCUdAyPPpRmmhZi7ZjX6fJp8UM6ofvmbQCqhcDGutdbtWf8C5W5FSerW2EhrLT6uJV4QFgMLVUTRRFdQjjcwgCo4Ng9MAcWkkQ02E9TnKebIqnilkB+ArtuCf0r8yWhJ9x9RSvcyznOhR4dRIthkTdtBaNjcEUnQiHHWMf3Vae4syNIhE6qMzp+65lPQt4UksLXBP3GMESl4idiOzrR5fyTfLcR0s4jbtOgT0dRwn/oSDvl818omeNgzqKomAcrq9IMMAmOe7hrzFOyBMdnKjEnp0B+/i9vzoFBTqhjl0yVakudA23kszWo0Fg10Vie1x9DiPvLf/6XQZrl/+ErPxE9PG+aKGRDC5YuNa85fuSqVewqJTTxEiEvEPk20xEoPFvCzu/sDq/Y1jawRmaHoyJTuU/z/+JTCD8Ejq0FroKphZTBZn/+HG+oRlGis9SHIssepcrE58EMSxWp2JO1Gwd1lgsb65k7twYmvPiq5zzhNxfP1PRbFL88b86s5n2gRc6RzGNG7A=
  bucket: superheroiccoding.de
  local-dir: distS3
  upload-dir: angularExamples
  region: eu-central-1
  acl: public_read
  detect_encoding: true
  default_text_charset: utf-8
  cache_control: max-age=31536000
  on:
    repo: SuperheroicCoding/AngularExamples
    branch: master
    tags: true

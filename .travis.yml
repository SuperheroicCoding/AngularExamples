dist: trusty
sudo: false
language: node_js
node_js:
- '10'
env:
  global:
  - NODE_OPTIONS=--max_old_space_size=7000
cache:
- npm
addons:
  chrome: stable
install:
- npm ci
- npm install codecov -g
script:
- node -p "v8.getHeapStatistics().total_available_size / (1024 * 1024)"
- npm run lint
- npm run test-thanos -- --watch=false --progress=false --browsers=ChromeHeadlessCI
- npm run build-deps
- npm run test -- --watch=false --progress=false --browsers=ChromeHeadlessCI --code-coverage
- npm run buildS3
after_success:
- codecov
deploy:
  skip_cleanup: true
  provider: s3
  access_key_id: AKIARJIXB7N7U5V2NTNH
  secret_access_key:
    secure: RLtXH9a4Cd9EAUKKGglMIFhFvEHGHSiL0CC6HSkeCijuKQUgHsJNf+/RzlJEMFP/wFUK06PqpNAb0GQZLryixIuj1Eq8B541SlE6N4edY971UeXjeOvTV2sKdBCEmRHFXslZiL/Ihf/7/0caWSumvpqEyw90bPDUBGMfgh7OvRuSRZPXIH2SLprf/MFzRCec0kxANyfCY8ij7tsnylcE93BfdNTFadiZovsr8db4ofLYLquNLZ0xvydfzCVtbz86T9zrVziPBgBwKj8uM48fXW4GZA5UxcXje9Vs6arSKZFyDEMJnsT65OQ8uyDPjy39QnJusBkobqC6gBdLeyy2PRiZ5a+tbMCjd4WVgSm3Aa56r/DKXjBdkaLbsx9gu2PiuJl8G7OmtqOCXSgE46iYS2Co6Xza0dRQ1mYQJEFmuP7zDY004NDICsMLxlgTLHlgTOxJ6qvUF+nD9Upow9LWgg4rvW4XsC9IwXpyukFI3irs7/biI0SwqJjKWt9PmtvstrNLxdY/hjwVfNuVTBb0QSXxifEfYljInSxqb/u+Da6tspAAjWJuv0ULtrpXlnB1JKFF8o0cabcyHRNJPBAd1NTvhj6FFXEdbOdKeZ8HS8Wx0/RT7qMC6ImPvRsf+tcplAkBcei1QsVmCuh89dplUOWS9RWrZ5t0J+6norIKBfk=
  bucket: superheroiccoding.de
  local-dir: distS3
  upload-dir: angularExamples
  region: eu-central-1
  acl: public_read
  detect_encoding: true
  default_text_charset: utf-8
  cache_control: max-age=31536000
  on:
    repo: SuperheroicCoding/AngularExamples
    branch: master
    tags: true
